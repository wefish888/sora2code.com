---
import BaseLayout from '../../components/layout/BaseLayout.astro';
import { privacyContent } from '../../i18n/content/privacy';

const content = privacyContent.ja;

// Emoji mapping for sections
const emojiMap: Record<string, string> = {
  'introduction': '📖',
  'information': '📊',
  'usage': '⚙️',
  'cookies': '🍪',
  'third-party': '🔗',
  'security': '🛡️',
  'retention': '🗄️',
  'rights': '⚖️',
  'children': '👨‍👩‍👧‍👦',
  'international': '🌍',
  'changes': '📝',
  'contact': '📧'
};
---

<BaseLayout
  title="プライバシーポリシー - sora2code"
  description="Sora2Code.comのプライバシーポリシー。データの保護とプライバシーの尊重について学びましょう。"
>
	<div class="max-w-4xl mx-auto px-4 py-8">
		<!-- Page title -->
		<div class="text-center mb-12">
			<h1 class="text-4xl font-bold text-white mb-4">🔒 {content.title}</h1>
			<p class="text-xl text-gray-300">{content.subtitle}</p>
			<p class="text-sm text-gray-400 mt-4">{content.lastUpdated}</p>
		</div>

		<!-- Privacy content -->
		<div class="space-y-8">
			{content.sections.map((section) => (
				<section class="bg-gray-800 rounded-lg p-6">
					<h2 class="text-2xl font-bold text-white mb-6 flex items-center">
						{emojiMap[section.id] || '📄'} <span class="ml-2">{section.title}</span>
					</h2>
					<div class="space-y-4 text-gray-300">
						{section.content && section.content.map((paragraph) => (
							<p>{paragraph}</p>
						))}

						{section.list && (
							<ul class="list-disc ml-6 space-y-2">
								{section.list.map((item) => {
									if (typeof item === 'string') {
										return <li>{item}</li>;
									} else {
										return <li><strong>{item.key}</strong> {item.value}</li>;
									}
								})}
							</ul>
						)}

						{section.subsections && section.subsections.map((subsection) => (
							<div class="mt-4">
								<h3 class="text-lg font-semibold text-white mb-2">{subsection.subtitle}</h3>
								{'content' in subsection && subsection.content && <p>{subsection.content}</p>}
								{'list' in subsection && subsection.list && (
									<ul class="list-disc ml-6 space-y-2">
										{subsection.list.map((item) => (
											<li>{item}</li>
										))}
									</ul>
								)}
							</div>
						))}

						{section.footer && (
							typeof section.footer === 'string' ? (
								<p class="mt-4">{section.footer}</p>
							) : (
								<div class="mt-4">
									<p><strong>{section.footer.title}</strong> {section.footer.content}</p>
								</div>
							)
						)}

						{section.note && typeof section.note === 'object' && 'title' in section.note && (
							<div class="mt-4 bg-blue-900/30 border border-blue-700 rounded-lg p-4">
								<p><strong>{section.note.title}</strong> {section.note.content}</p>
							</div>
						)}

						{section.warning && (
							<div class="mt-4 bg-yellow-900/30 border border-yellow-700 rounded-lg p-4">
								<p><strong>{section.warning.title}</strong> {section.warning.content}</p>
							</div>
						)}

						{section.contact && (
							<div class="mt-4">
								<p class="mb-2">邮箱: <a href={`mailto:${section.contact.email}`} class="text-purple-400 hover:text-purple-300">{section.contact.email}</a></p>
								<p class="mb-2">主题: {section.contact.subject}</p>
								<p class="mb-2">DPO: <a href={`mailto:${section.contact.dpo}`} class="text-purple-400 hover:text-purple-300">{section.contact.dpo}</a></p>
								{section.note && <p class="text-sm mt-4">{section.note}</p>}
							</div>
						)}
					</div>
				</section>
			))}
		</div>

		<!-- Privacy commitment -->
		<div class="mt-12 bg-gradient-to-r from-purple-900 to-blue-900 rounded-lg p-6 text-center">
			<h3 class="text-xl font-bold text-white mb-3">{content.commitment.title}</h3>
			<p class="text-gray-300">{content.commitment.content}</p>
		</div>
	</div>
</BaseLayout>
